# BibcamStage (Channel 22)

## システム構成

![Schematics](https://user-images.githubusercontent.com/343936/178990585-e5e53546-8cbe-4033-aa50-d5e13e80ff16.png)

- Windows PC (Ryzen 7 3700X, GeForce RTX 2060 SUPER)
- UPERFECT X Lapdock
- MacBook Pro (M1 Max, Late 2021)
- Novation Launch Control XL
- Komplete Audio 2
- Anker PowerExpand+ 5-in-1 (USB-C ethernet hub)

`BibcamStage` は MacBook 上での動作も可能な仕様だったが、 Unity 側で「Metal 使用時に定期的にスパイクが発生する」という不具合が発生しており、代替として Windows PC を用いざるを得なかった。Windows PC の運用は UPERFECT X の導入でかなり楽になったものの、演者卓の上でこれを展開するのはやはり面倒だった。次回はできれば MBP + MBA の最小構成にまとめたい。

## プロジェクト構成

https://github.com/keijiro/BibcamStage

Unity プロジェクトと Bitwig プロジェクトを含む。

- Bibcam クリップはリポジトリに含まれていない。別途用意して `StreamingAssets` に入れておく必要がある。
- Bitwig に [vzo プラグイン](https://github.com/keijiro/vzo) のインストールが必要。
- Bitwig の標準音源ライブラリが必要。

### プロジェクト依存構成

`BibcamStage` は `BibcamVfx` リポジトリをサブモジュールとして内包している。シーンの基本的な構成要素は `BibcamVfx` の `ThirdPerson` サンプルシーン内に組まれており、 `BibcamStage` ではこれを加算シーンロードしオーバーライド制御する。具体的には、 UI を消してキーボード操作を加えたり、 vzo 信号を受信して FlashGlitch エフェクトを重ねたり、等々。

こういった作りにしたのは、どうせエフェクトのバリエーションを沢山作るのならば、それをそのまま `Bibcam` のサンプルとして流用したい、という思いがあったため。そこで逆に、サンプルを本格的に作り込んでおき、それをそのままパフォーマンスプロジェクトに流用するという構造にした。

サブモジュールからのアセットの取り込みを実現するために、 `BibcamVfx` のアセットはすべて `Packages` ディレクトリに `jp.keijiro.bibcam.vfxgraph.samples` パッケージとして格納した。`BibcamStage` プロジェクトからは `file:` エントリを使ってそのパッケージを取り込んでいる。

この管理手法は想像以上にうまく機能した。今後も同様の手法を使っていくことができるかもしれない。

## Bibcam

渋谷で収録した素材を中心に、三軒茶屋や銀座で収録した素材を一部に混ぜて使用した。撮影には iPhone 13 Pro Max を使用。スタビライザーは DJI OM 5 を使用した。スタビライザーは映像に浮遊感を与えるために重要な要素で、もはや必須とも言える。

編集は DaVinci Resolve で行った。編集に特別な配慮は必要無く、適当なビットレートで出力するだけで上手く動いた。この辺りは Bibcam の強みが想定通りに機能している。

映像に浮遊感を出すために、基本的に 0.5 倍速再生している。素材の尺は実時間で３０分以上あったので、実は素材は余り気味だった。

VFX のネタについては今後も思いつくままに増やしていくだけで良いと思うが、時間軸・空間軸を操作する手法については、まだ拡げる余地があると思われる。逆再生、一時停止、リピート再生、複数軸同時再生、 FOV 操作、等々。

## Bitwig

オーディオは基本的に全て Grid システム (Note Grid, Poly Grid, FX Grid) を使って生成している。約 40 トラックほど並べて、ミキシングとマスタートラックエフェクトで展開を作っていく。

シーケンスは基本的に Note Grid を使って生成する。各クリップには全音符のみが置かれていて、ノート・オンの間だけシーケンスを生成し続けるような仕組みになっている。これにより、クリップの停止と共にデバイスがスリープされるという連携が実現されている。

マスタートラックには FX Grid 等を使って構築した汎用ビートリピートを噛ませてある。これは Kaoss Pad 的な使い方のできるパフォーマンス・エフェクトであり、 Launch Control に操作をアサインしてある。今回は結局 Launch Control をこの用途にのみ使用した

### 気づいた点

- 40 トラックあってもデバイスが適切にスリープされていればそれほど大きな CPU 負荷にならない。ただし、プロジェクトの初期化（プロジェクトを開いてから再生可能になるまでの遅延）がかなり発生するため、これ以上トラックを増やすのは難しいかもしれない。
- 一部のドラムトラックでは Note Grid ではなく通常のクリップシーケンスを使っている。 Bitwig では Trigger Condition や Probability を使って生成的なシーケンスを構築することもできるため、特にリズム要素ではこれで完結できるケースも多い。
- 40 トラックもあるため、コントローラーにアサインすることはほぼ不可能。今回はライブでトラックパッド（マウス）操作を行った。ぶっちゃけ単純で分かりやすいが、同時に操作できる要素が１つに限定されてしまうなど、制約も多い。もう少し上手い方法を考えたい。
