# Rcam4

"ASTRA" で使用した Tokyo Node 仕様の Rcam セット。Rcam2 をベースに簡単な移植で済ませる予定だったが、結局ほとんど作り直した。

## URP への移行

作り直しが必要となった主な理由は URP へ移植したことにある。移植を行いつつ、Metavido や Rcam3 からのフィードバックも加え、実装の古い部分を作り直したり、潜在的なバグの修正などを行なっていった。ポストエフェクト処理や背景描画処理は RenderGraph 対応を行うために完全な書き直しが必要となった。また、UI についても UI Toolkit への移行を行なった。

## VJUI 使用スタイルの変更

以前の Rcam3 や Dcam においては UI Toolkit の data binding を使用していたが、これは UI 側に初期値を持たせることができないという制約が発生してしまうため、使用を止めることにした。今回のプロジェクトでは明示的なスクリプティングによる同期を行っている。

VJUI については Knob の初期状態が不正になる不具合なども直すことができた。今回の収穫は比較的大きかったと感じる。

## NDI 接続失敗問題

Dcam の際に遭遇した「NDI の接続に失敗する」という問題が再現した。主にビルド後の実行で失敗することが多かったように思われる。

### 試した対処

- Info.plist へのエントリの追加 - iOS では必須とされているいくつかの Info.plist エントリについて macOS でも追加を行うようにしてみた。この変更によって、明示的に LAN アクセスの許可要求ダイアログが出てくるようになったものの、それほど動作は変わっていないように見える。繋がらない時は繋がらないし、繋がるときは繋がる。今のところ、アプリ再起動等で解決する程度の軽い症状しか出ていないが、恐らく長時間繋がらなくなるケースも出てくるのではないか。
